<html>
  <head>
    <script src="script.js?c=2&delay=250&clientdelay=666"></script>
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <main>
      <h1><a href="/">Long Animation frame</a></h1>
      <button id="button">Click me</button>
      <img src="image.jpg?c=1" alt="Test Image" />
      <img src="image.jpg?c=2" alt="Test Image" />
      <img src="image.jpg?c=3" alt="Test Image" />
      <img src="image.jpg?c=4" alt="Test Image" />
      <img src="image.jpg?c=5" alt="Test Image" />
      <img src="image.jpg?c=6" alt="Test Image" />
      <img src="image.jpg?c=7" alt="Test Image" />
      <img src="image.jpg?c=8" alt="Test Image" />
      <img src="image.jpg?c=9" alt="Test Image" />
      <img src="image.jpg?c=10" alt="Test Image" />
    </main>

    <script type="text/javascript">
        const observer = new PerformanceObserver(list => {
          for (const entry of list.getEntries()) {
              performance.measure('LoAF', {
        start: entry.startTime,
        end: entry.startTime + entry.duration,
        detail: {
          devtools: {
            dataType: "track-entry",
            track: "Long animation frames",
            trackGroup: "Performance Timeline",
            color: "tertiary-dark",
            tooltipText: 'LoAF'
          }
        }
      });
      console.log(entry);
            }
          });
        observer.observe({ type: 'long-animation-frame', buffered: true });

         const button = document.querySelector('#button');

          button.addEventListener('mouseover', (event) => {
            console.log('Button hovered');
            console.log(fibonacci(40));
          });

           button.addEventListener('click', async (event) => {
            console.log('Button clicked');
            event.target.classList.add('bigger');
          });

           function fibonacci(n) {
            return n < 1 ? 0
              : n <= 2 ? 1
              : fibonacci(n - 1) + fibonacci(n - 2)
      }
    </script>
  </body>
</html>
